name: Update docs for client
on:
  push:
    branches:
      - main
    paths:
      - 'cmd/cli/**'  
jobs:
  update-docs-cli:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Update documentation
        shell: bash
        run: make docs

      # generate PR with the changes
      - name: Commit and push changes
        uses: peter-evans/create-pull-request@v5
	with:
	  committer: Stacklok <noreply@stacklok.com>
          author: ${{ github.actor }} <${{ github.actor }}@stacklok.com>
	  branch-suffix: timestamp
	  signoff: false
	  delete-branch: true
	  title: "Update client docs"
	  labels: automated pr,docs
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
