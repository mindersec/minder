"use strict";(self.webpackChunkstacklok=self.webpackChunkstacklok||[]).push([[9532],{6998:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var i=r(74848),t=r(28453);const s={title:"Using Minder with GitHub Advanced Security",sidebar_position:90},o=void 0,a={id:"how-to/using-minder-with-ghas",title:"Using Minder with GitHub Advanced Security",description:"Prerequisites",source:"@site/docs/how-to/using-minder-with-ghas.md",sourceDirName:"how-to",slug:"/how-to/using-minder-with-ghas",permalink:"/how-to/using-minder-with-ghas",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:90,frontMatter:{title:"Using Minder with GitHub Advanced Security",sidebar_position:90},sidebar:"minder",previous:{title:"Setting up a Profile for Alerts",permalink:"/how-to/setup-alerts"},next:{title:"Adding Users to your Project",permalink:"/how-to/add_users_to_project"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Overview",id:"overview",level:2},{value:"GitHub Advanced Security Features",id:"github-advanced-security-features",level:2},{value:"Applying and enforcing GitHub Advanced Security features using Minder",id:"applying-and-enforcing-github-advanced-security-features-using-minder",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"minder"})," CLI application"]}),"\n",(0,i.jsx)(n.li,{children:"A Stacklok account"}),"\n",(0,i.jsx)(n.li,{children:"At least one GitHub public repository (an Advanced Security license is not required to apply Advanced Security settings to public repos)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://docs.github.com/en/get-started/learning-about-github/about-github-advanced-security",children:"GitHub Advanced Security"})," includes a set of security features that can be enabled for free on public repos, and with the purchase of an enterprise license for private repos. You can use Minder to automatically enable and enforce Advanced Security features across a group of repositories, to avoid manual enablement and monitoring."]}),"\n",(0,i.jsx)(n.p,{children:"Note: Minder is currently only available for public repos to support open source projects. Please contact us if you\u2019re interested in using Minder with GitHub Advanced Security for your private repos."}),"\n",(0,i.jsx)(n.h2,{id:"github-advanced-security-features",children:"GitHub Advanced Security Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://docs.github.com/en/code-security/code-scanning/introduction-to-code-scanning/about-code-scanning",children:"Code scanning"})}),": Analyzes code in your repo for security vulnerabilities and coding errors. This practice helps find vulnerabilities or errors in your code before you commit, to help you avoid rework and issues down the road."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://docs.github.com/en/code-security/secret-scanning/about-secret-scanning",children:"Secret scanning"})}),": Scans your repos and notifies you about any leaked secrets, like tokens and private keys. Secret leakage can happen particularly when a formerly private repo moves to public, or joins your project\u2019s group of repos. Having this type of scanning automatically enabled and enforced for all repos in your project can help prevent unintentional and unknown leakage."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://docs.github.com/en/code-security/supply-chain-security/understanding-your-software-supply-chain/about-dependency-review",children:"Dependabot alerts and dependency review"})}),": GitHub enables dependency graphs for public repos by default. The dependency graph helps you visualize the dependencies in your repo; which projects are using them; and vulnerability data for those dependencies. When Dependabot alerts are enabled for your repo, along with the dependency graph, you can get an alert when a new security advisory is detected for those dependencies, or when the dependency graph changes (like through a version bump or a code change to the dependency itself)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["These features can be quickly applied and continuously enforced across multiple repos using Minder\u2019s ",(0,i.jsx)(n.a,{href:"https://github.com/stacklok/minder-rules-and-profiles",children:"existing resource rule types"})," and our ",(0,i.jsx)(n.a,{href:"https://github.com/stacklok/minder-rules-and-profiles/blob/main/profiles/github/ghas.yaml",children:"GitHub Advanced Security profile"})," as a reference."]}),"\n",(0,i.jsx)(n.h2,{id:"applying-and-enforcing-github-advanced-security-features-using-minder",children:"Applying and enforcing GitHub Advanced Security features using Minder"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1: Enroll the GitHub provider."})," ",(0,i.jsx)(n.br,{}),"\n","This allows Minder to manage your GitHub repositories. The following command will prompt you to log in to your GitHub account:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"minder provider enroll\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2: Register your GitHub repos."})," ",(0,i.jsx)(n.br,{}),"\n","Choose which repos for which you want to apply and enforce GitHub Advanced security settings. You can register a set of repositories by name, using the command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'minder repo register --name "owner/repo1,owner/repo2"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3: Create rule types for GitHub Advanced Security settings using Minder\u2019s existing resource rule types."})," ",(0,i.jsx)(n.br,{}),"\n","To easily add rules for GitHub Advanced Security settings to a profile and apply those rules to your repos, you can use Minder\u2019s existing reference rules."]}),"\n",(0,i.jsxs)(n.p,{children:["First, you can fetch all of our reference rules by cloning the ",(0,i.jsx)(n.a,{href:"https://github.com/stacklok/minder-rules-and-profiles",children:"minder-rules-and-profiles"})," repository:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/stacklok/minder-rules-and-profiles.git\n"})}),"\n",(0,i.jsx)(n.p,{children:"In that directory, you will find all of our reference rules and profiles:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd minder-rules-and-profiles\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can now choose from the reference rules in this list to apply to your profile. Our ",(0,i.jsx)(n.a,{href:"https://github.com/stacklok/minder-rules-and-profiles/blob/main/profiles/github/ghas.yaml",children:"GitHub Advanced Security profile"})," provides an example of a profile with GitHub Advanced Security rule types added."]}),"\n",(0,i.jsx)(n.p,{children:"You can also pick and choose which rule types to create, based on which GitHub security settings you want to enable. The below reference rule types will enable GitHub Advanced Security settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"codeql_enabled.yaml"}),"\n",(0,i.jsx)(n.li,{children:"secret_scanning.yaml"}),"\n",(0,i.jsx)(n.li,{children:"secret_push_protection.yaml"}),"\n",(0,i.jsx)(n.li,{children:"dependabot_configured.yaml"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To create a rule type, you can use the following command (using secret scanning as an example):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"minder ruletype create -f rule-types/github/secret_scanning.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Minder also includes reference rule types for other security features for GitHub, like branch protections and creating allowlists for GitHub Actions. To enable those additional security features, you can also choose to create rule types for all available GitHub security features by using this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"minder ruletype create -f rule-types/github/\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 4: Create a profile to apply GitHub Advanced Security Settings to your repos."})," ",(0,i.jsx)(n.br,{}),"\n","After you\u2019ve created your rule types, you can set up a profile that checks to make sure that these settings are in place for your registered repos. Profiles represent a configuration that you can apply to a group of repos.\nStart by creating a file named profile.yaml, and add some basic information:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"version: v1 \ntype: profile \nname: my-ghas-profile \ncontext: provider: github\n"})}),"\n",(0,i.jsx)(n.p,{children:"Register the rules that you just created:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"repository: \n - type: secret_scanning \ndef: \n  enabled: true\n"})}),"\n",(0,i.jsx)(n.p,{children:"Choose to enable alerting and autoremediation. With autoremediation enabled, Minder will continuously check to ensure that these settings are applied to your registered repos, and take action when the settings are not applied (for example, by opening a PR with a fix, or re-applying the setting)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'alert: "on"\nremediate: "on"\n'})}),"\n",(0,i.jsx)(n.p,{children:"And then create your profile in Minder:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"minder profile create -f profile.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check the status of your profile and see which repositories satisfy the rules by running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"minder profile status list --name my-ghas-profile --detailed\n"})}),"\n",(0,i.jsx)(n.p,{children:"With these steps in place, Minder will continuously apply and enforce GitHub Advanced Security settings to the repos you\u2019ve registered for your profile."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var i=r(96540);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);