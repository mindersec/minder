"use strict";(globalThis.webpackChunkminder_docs=globalThis.webpackChunkminder_docs||[]).push([[1495],{65955(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"user_management/github_actions","title":"Managing Minder With GitHub Actions","description":"In addition to human users, Minder also supports","source":"@site/docs/user_management/github_actions.md","sourceDirName":"user_management","slug":"/user_management/github_actions","permalink":"/user_management/github_actions","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":60,"frontMatter":{"title":"Managing Minder With GitHub Actions","sidebar_position":60},"sidebar":"minder","previous":{"title":"Adding users to your project","permalink":"/user_management/adding_users"},"next":{"title":"User roles","permalink":"/user_management/user_roles"}}');var s=i(74848),o=i(28453);const r={title:"Managing Minder With GitHub Actions",sidebar_position:60},a=void 0,c={},d=[{value:"Configuring Minder For GitHub Actions Authentication",id:"configuring-minder-for-github-actions-authentication",level:2}];function u(e){const n={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["In addition to ",(0,s.jsx)(n.a,{href:"/user_management/adding_users",children:"human users"}),", Minder also supports\nauthenticating GitHub Actions.  GitHub Actions are ",(0,s.jsxs)(n.a,{href:"https://docs.github.com/en/actions/security-for-github-actions/security-hardening-your-deployments/about-security-hardening-with-openid-connect#example-subject-claims",children:["identified by the ",(0,s.jsx)(n.code,{children:"sub"}),"\nclaim on the GitHub-issued JWT"]}),".\nUnlike human users, GitHub Actions ",(0,s.jsx)(n.em,{children:"cannot"})," accept an invitation, so\npermissions must be assigned directly with ",(0,s.jsx)(n.code,{children:"project role grant"})," or the\n",(0,s.jsx)(n.a,{href:"https://mindersec.github.io/ref/proto#minder-v1-PermissionsService",children:"PermissionsService.AssignRole"}),"\nAPI.  Unlike human users, GitHub Actions are identified using the format"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"githubactions/${sub}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For example, a GitHub Action run from the ",(0,s.jsx)(n.code,{children:"main"})," branch of the ",(0,s.jsx)(n.code,{children:".github"}),"\nrepository in the ",(0,s.jsx)(n.code,{children:"example-org"})," organization (a common configuration) would be\nspecified as ",(0,s.jsx)(n.code,{children:"githubactions/repo:example-org/.github:ref:refs/heads/main"}),".  You\ncould grant this role ",(0,s.jsx)(n.code,{children:"admin"})," permission on a project with the following\ncommand:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"minder project role grant --grpc-host api.custcodian.dev \\\n  --project 00000000-0000-0000-0000-000000000000 \\\n  --sub githubactions/repo:myorg/myrepo:ref:refs/heads/main \\\n  --role admin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can then use a GitHub action like ",(0,s.jsx)(n.a,{href:"https://github.com/custcodian/minder-action",children:"the Custcodian minder\naction"})," to load rule types and\nprofiles from your ",(0,s.jsx)(n.code,{children:".github"})," repository."]}),"\n",(0,s.jsx)(n.h2,{id:"configuring-minder-for-github-actions-authentication",children:"Configuring Minder For GitHub Actions Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["As a Minder administrator, there are two settings which need to be enabled\nto allow GitHub Actions to authenticate.  The first is to add the GitHub\nActions OIDC issuer to the ",(0,s.jsx)(n.code,{children:"identity"})," configuration section of the Minder\nserver:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"identity:\n  server:\n    # ...\n  additional_issuers:\n  - https://token.actions.githubusercontent.com\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The second step is to enable the ",(0,s.jsx)(n.code,{children:"machine_accounts"})," experiment:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"machine_accounts:\n  variations:\n    enabled: true\n    disabled: false\n  defaultRule:\n    variation: enabled\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);