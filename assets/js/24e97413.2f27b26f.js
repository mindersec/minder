"use strict";(self.webpackChunkminder_docs=self.webpackChunkminder_docs||[]).push([[5882],{33361:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"ref/rules/pr_trusty_check","title":"Stacklok Insight check","description":"The following rule type is available to check dependency risk with Stacklok Insight.","source":"@site/docs/ref/rules/pr_trusty_check.md","sourceDirName":"ref/rules","slug":"/ref/rules/pr_trusty_check","permalink":"/ref/rules/pr_trusty_check","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Stacklok Insight check","sidebar_position":20},"sidebar":"minder","previous":{"title":"Branch protections","permalink":"/ref/rules/branch_protection"},"next":{"title":"Dependabot","permalink":"/ref/rules/dependabot_configured"}}');var t=i(74848),r=i(28453);const o={title:"Stacklok Insight check",sidebar_position:20},c="Stacklok Insight Rule",l={},d=[{value:"<code>pr_trusty_check</code> - Verifies that pull requests do not add any dependencies with risk indicators from Stacklok Insight",id:"pr_trusty_check---verifies-that-pull-requests-do-not-add-any-dependencies-with-risk-indicators-from-stacklok-insight",level:2},{value:"Entity",id:"entity",level:2},{value:"Type",id:"type",level:2},{value:"Rule Parameters",id:"rule-parameters",level:2},{value:"Rule Definition Options",id:"rule-definition-options",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"stacklok-insight-rule",children:"Stacklok Insight Rule"})}),"\n",(0,t.jsxs)(n.p,{children:["The following rule type is available to check dependency risk with ",(0,t.jsx)(n.a,{href:"https://insight.stacklok.com/",children:"Stacklok Insight"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"pr_trusty_check---verifies-that-pull-requests-do-not-add-any-dependencies-with-risk-indicators-from-stacklok-insight",children:[(0,t.jsx)(n.code,{children:"pr_trusty_check"})," - Verifies that pull requests do not add any dependencies with risk indicators from Stacklok Insight"]}),"\n",(0,t.jsxs)(n.p,{children:["This rule allows you to monitor new pull requests for newly added dependencies with risk indicators from\n",(0,t.jsx)(n.a,{href:"https://insight.stacklok.com/",children:"Stacklok Insight"}),".\nFor every pull request submitted to a repository, this rule will check any software\ndependencies for the supported ecosystems and flag any problems found with them.\nBased on the Stacklok Insight data, Minder can block the PR or mark the policy as failed."]}),"\n",(0,t.jsx)(n.h2,{id:"entity",children:"Entity"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"pull_request"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"type",children:"Type"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"pr_trusty_check"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"rule-parameters",children:"Rule Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"None"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"rule-definition-options",children:"Rule Definition Options"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"pr_trusty_check"})," rule supports the following options:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"action"})," (string): The action to take if a risky package is found. Valid values are:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"summary"}),": The evaluator engine will add a single summary comment with a table listing risky packages found"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"profile_only"}),": The evaluator engine will merely pass on an error, marking the profile as failed if a risky package is found"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"review"}),": The trusty evaluator will add a review asking for changes when problematic dependencies are found. Use the review action to block any pull requests introducing dependencies that break the policy established defined by the rule."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ecosystem_config"}),": An array of ecosystem configurations to check. Each ecosystem configuration has the following options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," (string): The name of the ecosystem to check. Currently ",(0,t.jsx)(n.code,{children:"npm"})," and ",(0,t.jsx)(n.code,{children:"pypi"})," are supported."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"score (integer)"}),": DEPRECATED - this score is deprecated and only remains for backward compatibility. It always returns a value of ",(0,t.jsx)(n.code,{children:"0"}),". We recommend setting this option to ",(0,t.jsx)(n.code,{children:"0"})," and using the other options to control this rule's behavior."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"provenance"})," (number): Minimum provenance score to consider a package's proof of origin satisfactory."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"activity"})," (number): Minimum activity score to consider a package as active."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"allow_malicious"})," (boolean): Don't raise an error when a PR introduces dependencies known to be malicious (not recommended)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"allow_deprecated"})," (boolean): Don't block when a pull request introduces dependencies marked as deprecated upstream."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(96540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);