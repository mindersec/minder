// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.18.0
// source: access_tokens.sql

package db

import (
	"context"
)

const createAccessToken = `-- name: CreateAccessToken :one
INSERT INTO access_tokens (organization_id, encrypted_token) VALUES ($1, $2) RETURNING id, organization_id, encrypted_token, created_at, updated_at
`

type CreateAccessTokenParams struct {
	OrganizationID int32  `json:"organization_id"`
	EncryptedToken string `json:"encrypted_token"`
}

func (q *Queries) CreateAccessToken(ctx context.Context, arg CreateAccessTokenParams) (AccessToken, error) {
	row := q.db.QueryRowContext(ctx, createAccessToken, arg.OrganizationID, arg.EncryptedToken)
	var i AccessToken
	err := row.Scan(
		&i.ID,
		&i.OrganizationID,
		&i.EncryptedToken,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteAccessToken = `-- name: DeleteAccessToken :exec
DELETE FROM access_tokens WHERE organization_id = $1
`

func (q *Queries) DeleteAccessToken(ctx context.Context, organizationID int32) error {
	_, err := q.db.ExecContext(ctx, deleteAccessToken, organizationID)
	return err
}

const getAccessTokenByOrganizationID = `-- name: GetAccessTokenByOrganizationID :one
SELECT id, organization_id, encrypted_token, created_at, updated_at FROM access_tokens WHERE organization_id = $1
`

func (q *Queries) GetAccessTokenByOrganizationID(ctx context.Context, organizationID int32) (AccessToken, error) {
	row := q.db.QueryRowContext(ctx, getAccessTokenByOrganizationID, organizationID)
	var i AccessToken
	err := row.Scan(
		&i.ID,
		&i.OrganizationID,
		&i.EncryptedToken,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateAccessToken = `-- name: UpdateAccessToken :one
UPDATE access_tokens SET encrypted_token = $2, updated_at = NOW() WHERE organization_id = $1 RETURNING id, organization_id, encrypted_token, created_at, updated_at
`

type UpdateAccessTokenParams struct {
	OrganizationID int32  `json:"organization_id"`
	EncryptedToken string `json:"encrypted_token"`
}

func (q *Queries) UpdateAccessToken(ctx context.Context, arg UpdateAccessTokenParams) (AccessToken, error) {
	row := q.db.QueryRowContext(ctx, updateAccessToken, arg.OrganizationID, arg.EncryptedToken)
	var i AccessToken
	err := row.Scan(
		&i.ID,
		&i.OrganizationID,
		&i.EncryptedToken,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
